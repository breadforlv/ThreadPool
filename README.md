# 基于C++11的线程池
线程池的组成如下:

线程池管理器：负责创建、销毁线程，维护线程池状态（如空闲线程、忙碌线程）。

任务队列：用于存储待执行的任务。任务通常以函数对象（如 std::function）的形式存储。

工作线程：线程池中的实际线程，它们从任务队列中取出任务并执行。

同步机制：用于保护任务队列和线程池状态的线程安全操作，通常使用互斥锁和条件变量。


ThreadPool类

1.使用 std::shared_ptr<Task> 管理任务

•	避免裸指针的使用，任务的生命周期由智能指针自动管理。

2. 支持任意任务类型
   
•	通过模板函数 enqueue，支持任意类型的任务提交，包括函数、lambda、成员函数等。

4. 动态调整线程池大小
   
•	提供 resize 方法，可以动态增加或减少线程池的线程数量。

•	当减少线程时，线程资源会在线程退出时自动清理。

6. 线程安全的任务队列
   
•	使用 std::mutex 和 std::condition_variable，确保任务队列的线程安全访问和高效调度。

8. 活跃线程监控
   
•	activeThreads 用于记录当前正在执行任务的线程数，可以用于监控线程池的负载情况。


为了测试线程池，我提供两个类：ConcurrentThread 和 Logger。ConcurrentThread 用于模拟并发执行的任务，而 Logger 类则用于记录日志，确保线程池在运行时可以输出日志信息。



Task类优化：

1. std::function 替代函数指针
   
std::function 是现代 C++ 中强大的泛型回调机制，支持函数指针、lambda 表达式、std::bind 和其他任意可调用对象。这样可以使任务更加灵活。

3. 任务的标准化接口

任务通过统一的 execute 方法执行，避免直接调用函数指针和手动检查参数。

4. 任务名称与逻辑分离

通过重载构造函数，任务可以选择是否命名，未命名时默认使用 "Unnamed Task"。

5. 静态成员管理任务总数

taskNum 统计当前任务数量，可以为调试或监控提供支持。

6. 禁止拷贝任务

任务类被设计为不可拷贝，但可以移动，避免任务被意外复制导致状态混乱。

